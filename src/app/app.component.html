<!-- app.component.html -->
<div class="container">
  <h1 class="title">Generador de NÃºmeros Pares ğŸ”¢</h1>

  <div *ngIf="allNumbersUsed" class="warning-message">
    âš ï¸ Â¡Todos los nÃºmeros han sido generados! Usa el botÃ³n "Limpiar Todo" para reiniciar.
  </div>

  <div class="botones">
    <button class="btn-generar" (click)="generarNumero() ; ">
      <span class="icon">âœ¨</span> Generar nÃºmero
    </button>
    <button class="btn-toggle" (click)="toggleHistorial() ; mostrarTabla = false">
      <span class="icon">{{ mostrarHistorial ? 'ğŸ‘ï¸' : 'ğŸ“œ' }}</span> 
      {{ mostrarHistorial ? 'Ocultar' : 'Mostrar' }} Historial
    </button>
    <button class="btn-toggle" (click)="refrescarNumeros() ; mostrarTabla = !mostrarTabla ; mostrarHistorial = false">
      <span class="icon">ğŸ“‹</span> NÃºmeros usados
    </button>
    <button class="btn-danger" (click)="limpiarTodo()">
      <span class="icon">ğŸ§¹</span> Limpiar
    </button>
    <button class="btn-manual" (click)="mostrarManual = true">
      <span class="icon">ğŸ“–</span> Manual
    </button>
    
  </div>

  <div *ngIf="ultimoNumero !== null" class="ultimo-numero">
    ğŸ‰ Ãšltimo nÃºmero generado: <span class="numero">{{ ultimoNumero }}</span>
  </div>

  <!-- Manual Modal -->
  <div *ngIf="mostrarManual" class="manual-modal">
    <div class="modal-content">
      <span class="close" (click)="mostrarManual = false">&times;</span>
      <h2>ğŸ“š Manual de Uso</h2>
      <div class="manual-text">
        <p>1. Click en "Generar NÃºmero Par" para crear nuevos nÃºmeros</p>
        <p>2. Usa "Mostrar/Ocultar Historial" para ver el registro</p>
        <p>3. "Limpiar Todo" reinicia la aplicaciÃ³n</p>
        <p>4. Exporta/Importa tu historial con los botones correspondientes</p>
        <p>5. Los nÃºmeros se generan entre 0 y 100</p>
      </div>
    </div>
  </div>

  <!-- HISTORIAL -->
  <div *ngIf="mostrarHistorial" class="historial">
    <h2>ğŸ“‹ Historial</h2>
    <div class="backup-buttons">
      <button class="btn-exportar" (click)="exportarBackup()">
        <span class="icon">ğŸ“¤</span> Exportar
      </button>
      <button class="btn-importar" (click)="fileInput.click()">
        <span class="icon">ğŸ“¥</span> Importar
      </button>
      <input #fileInput type="file" hidden (change)="importarBackup($event)">
      
    </div>
    
    <div class="lista-historial">
      <div *ngFor="let item of historial" class="item-historial">
        <span>NÃºmero: {{ item.numero }} </span>
        <span>Fecha: {{ item.fecha | date:'dd/MM/yyyy HH:mm:ss' }}</span>
      </div>
    </div>
    
    <div class="suma-total">
      ğŸ§® Suma total: {{ sumaTotal }}
    </div>
  </div>

  <!-- ESQUEMA DE NUMEROS ACTUAL -->
   <div *ngIf = "mostrarTabla" class="tabla-numeros-modal">
    <h2>ğŸ“† NÃºmeros actuales</h2>
    <table class="even-table">
      <tbody>
        <tr *ngFor="let row of rows">
          <td *ngFor="let n of row" [ngClass]="{ 'on': isSelected(n) }">
            {{ n }}
          </td>
        </tr>
      </tbody>
    </table>

   </div>
</div>